<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:133.0) Gecko/20100101 Firefox/133.0" version="25.0.3">
  <diagram name="Page-1" id="gb6vPLIgWXJoWw3UpIAX">
    <mxGraphModel dx="-44" dy="4261" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="rZwPBGJ-U6KTbO7sFise-152" value="2. Setup tunnel and out address" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2530" y="-960" width="690" height="810" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-33" value="Node 0&lt;br&gt;(Source)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="125" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-190" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="rZwPBGJ-U6KTbO7sFise-152" source="rZwPBGJ-U6KTbO7sFise-34" target="rZwPBGJ-U6KTbO7sFise-189" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-34" value="Node 1" style="rounded=0;whiteSpace=wrap;html=1;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="295" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="rZwPBGJ-U6KTbO7sFise-152" source="rZwPBGJ-U6KTbO7sFise-33" target="rZwPBGJ-U6KTbO7sFise-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-76" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;BuildRoute {id}&lt;/div&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1" connectable="0">
          <mxGeometry x="415.0000225232982" y="509.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-186" value="All UDP packets incoming to allocated address will be routed to Node 0" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="95" y="60" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="rZwPBGJ-U6KTbO7sFise-152" source="rZwPBGJ-U6KTbO7sFise-189" target="rZwPBGJ-U6KTbO7sFise-192" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-189" value="Node 2" style="rounded=0;whiteSpace=wrap;html=1;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="295" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-191" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;BuildRoute {id}&lt;/div&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1" connectable="0">
          <mxGeometry x="415.00002252329796" y="349.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="rZwPBGJ-U6KTbO7sFise-152" source="rZwPBGJ-U6KTbO7sFise-192" target="bf9UCNY4LWysmnVGI4Mv-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-192" value="Node 3&lt;br&gt;Out" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="210" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-194" value="&lt;div&gt;Decrypt garlics:&lt;br&gt;&lt;/div&gt;&lt;div&gt;BindOutPort&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1" connectable="0">
          <mxGeometry x="405.00002252329796" y="339.99667292667687" as="geometry">
            <mxPoint x="-19" y="-141" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-195" value="Single packet can have multiple garlic instructions &lt;br&gt;for any number of nodes on the way" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="125" y="640" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-214" value="Node 1 knows about 2,0&lt;br&gt;(but doesnt know is 0 real source or another node)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="375" y="540" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-215" value="Node 2 knows about 1,3" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="435" y="275" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-216" value="Node 3 knows about 2,4&lt;br&gt;and out peers" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" parent="rZwPBGJ-U6KTbO7sFise-152" vertex="1">
          <mxGeometry x="360" y="130" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="rZwPBGJ-U6KTbO7sFise-152" source="bf9UCNY4LWysmnVGI4Mv-102" target="bf9UCNY4LWysmnVGI4Mv-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-102" value="Node 4" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="95" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="rZwPBGJ-U6KTbO7sFise-152" source="bf9UCNY4LWysmnVGI4Mv-103" target="rZwPBGJ-U6KTbO7sFise-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-103" value="Node 5" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="95" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-107" value="Encrypt payload:&lt;br&gt;OutPortAllocated&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#006600;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="70" y="150" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-108" value="&lt;div&gt;Uses encrypted instructions&amp;nbsp;&lt;/div&gt;&lt;div&gt;from BindOutPort&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#006600;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="40" y="120" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-109" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;BuildRoute {id}&lt;/div&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="95.00002252329796" y="229.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-110" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;BuildRoute {id}&lt;/div&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="105.00002252329796" y="359.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-111" value="&lt;div&gt;Decrypt garlics:&lt;/div&gt;&lt;div&gt;Deliver&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Decrypt payload:&lt;/div&gt;OutPortAllocated" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="105.00002252329796" y="519.9966729266769" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-112" value="&lt;div&gt;When OutPortAllocated received, node 0 can optimize tunnels,&amp;nbsp;&lt;/div&gt;&lt;div&gt;by removing BuildRoutes and replacing instructions on Node 3, with next SendOut&lt;br&gt;&lt;/div&gt;&lt;div&gt;.&lt;/div&gt;&lt;div&gt;It can also change topology of both tunnels on the fly&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-152">
          <mxGeometry x="55" y="700" width="460" height="70" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-153" value="1. Find nodes and connect" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1850" y="-960" width="590" height="550" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="rZwPBGJ-U6KTbO7sFise-153" source="rZwPBGJ-U6KTbO7sFise-154" target="rZwPBGJ-U6KTbO7sFise-178" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-241" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="rZwPBGJ-U6KTbO7sFise-153" source="rZwPBGJ-U6KTbO7sFise-154" target="rZwPBGJ-U6KTbO7sFise-240" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-154" value="Node 0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="90" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-173" value="DHT" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;align=center;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="90" y="90" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-174" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.55;entryY=0.95;entryDx=0;entryDy=0;entryPerimeter=0;" parent="rZwPBGJ-U6KTbO7sFise-153" source="rZwPBGJ-U6KTbO7sFise-154" target="rZwPBGJ-U6KTbO7sFise-173" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-175" value="1. Find proxy &lt;br&gt;overlay peers" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="150" y="160" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-176" value="2. Connect to peers &lt;br&gt;to find more peers" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="230" y="250" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-177" value="3. Request node&#39;s conditions, &lt;br&gt;price and payment node id" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="400" y="290" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-178" value="Node 1" style="rounded=0;whiteSpace=wrap;html=1;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="300" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-181" value="Decrypt garlics:&lt;br&gt;GetRandomPeers" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1" connectable="0">
          <mxGeometry x="295.00002252329796" y="319.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-182" value="Decrypt garlics:&lt;br&gt;GetInfoAndConditions" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1" connectable="0">
          <mxGeometry x="490.00002252329796" y="359.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-183" value="2,3 can be done through proxy, recursively" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="310" y="210" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-244" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="rZwPBGJ-U6KTbO7sFise-153" source="rZwPBGJ-U6KTbO7sFise-240" target="rZwPBGJ-U6KTbO7sFise-178" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-240" value="Payment node" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="90" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-243" value="4. Open virtual channel &lt;br&gt;with Node 1&lt;br&gt;(if payment needed)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry y="360" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-245" value="New channel notification" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-153" vertex="1">
          <mxGeometry x="220" y="470" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-239" value="&lt;font style=&quot;font-size: 45px;&quot;&gt;Tunnel architecture&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="2530" y="-1150" width="410" height="70" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-267" value="Open payment channel to pay for traffic" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1850" y="-380" width="590" height="520" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-268" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="rZwPBGJ-U6KTbO7sFise-267" source="rZwPBGJ-U6KTbO7sFise-270" target="rZwPBGJ-U6KTbO7sFise-276" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-269" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="rZwPBGJ-U6KTbO7sFise-267" source="rZwPBGJ-U6KTbO7sFise-270" target="rZwPBGJ-U6KTbO7sFise-281" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-270" value="Node 0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="160" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="rZwPBGJ-U6KTbO7sFise-267" source="rZwPBGJ-U6KTbO7sFise-276" target="rZwPBGJ-U6KTbO7sFise-281">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-276" value="Node N" style="rounded=0;whiteSpace=wrap;html=1;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="370" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-280" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="rZwPBGJ-U6KTbO7sFise-267" source="rZwPBGJ-U6KTbO7sFise-281" target="rZwPBGJ-U6KTbO7sFise-276" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-281" value="Payment node" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="160" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-282" value="1. Open new virtual &lt;br&gt;channel with Node 1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="80" y="300" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-283" value="New channel notification" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="290" y="400" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-285" value="&lt;div&gt;2. Decrypt instruction:&lt;/div&gt;&lt;div&gt;Payment&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1" connectable="0">
          <mxGeometry x="365.00002252329796" y="199.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-286" value="&lt;div&gt;When payment channel is required or old one is exceeded,&amp;nbsp;&lt;/div&gt;&lt;div&gt;Node 0 opens it through payment nodeand waits for confirmation&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" parent="rZwPBGJ-U6KTbO7sFise-267" vertex="1">
          <mxGeometry x="130" y="50" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-125" value="&lt;div&gt;When confirmed Node 0 attaches Payment instruction to next message,&lt;/div&gt;&lt;div&gt;Node 1 remembers the state and adds credit for traffic.&amp;nbsp;&lt;/div&gt;&lt;div&gt;When peer disconnected or channel exeeded Node 1 closes it using Payment Node&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-267">
          <mxGeometry x="80" y="110" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-127" value="&lt;div&gt;Close virtual channel when exceeded&lt;/div&gt;&lt;div&gt;and get coins&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="rZwPBGJ-U6KTbO7sFise-267">
          <mxGeometry x="230" y="450" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-1" value="Packet Structure" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1820" y="-2080" width="260" height="180" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-2" value="Tunnel public key" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-1">
          <mxGeometry y="30" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-3" value="Decrypted instructions checksum 64 bits" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-1">
          <mxGeometry y="60" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-6" value="Decrypted payload checksum 64 bits" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-1">
          <mxGeometry y="90" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-7" value="Encrypted instructions (multi-layer encryption)" style="text;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;strokeColor=default;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-1">
          <mxGeometry y="120" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-4" value="Encrypted payload (end2end encryption)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-1">
          <mxGeometry y="150" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-13" value="Instructions container" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2290" y="-1920" width="340" height="120" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-14" value="Random 32 bits (to randomize checksum)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-13">
          <mxGeometry y="30" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-15" value="Instructions for receiver node" style="text;strokeColor=default;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-13">
          <mxGeometry y="60" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-16" value="Encrypted instructions for next nodes (rest bytes)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-13">
          <mxGeometry y="90" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="bf9UCNY4LWysmnVGI4Mv-7" target="bf9UCNY4LWysmnVGI4Mv-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-18" value="Possible instructions" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2820" y="-2162.5" width="1040" height="635" as="geometry">
            <mxRectangle x="2700" y="-2135" width="150" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-20" value="BuildRoute (once)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="40" y="55" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-21" value="Target ADNL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-20">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-22" value="Next Tunnel Pubkey" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-20">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-23" value="RouteID (uint32)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-20">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-24" value="Route (16 bytes boxed)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="220" y="55" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-25" value="RouteID" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-24">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-26" value="Next instructions checksum" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-24">
          <mxGeometry y="60" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-28" value="Payment" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="480" y="55" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-29" value="Virtual channel state" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-28">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-31" value="BindOutPort (once)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="90" y="205" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-32" value="Inbound Node ADNL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-31">
          <mxGeometry y="30" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-33" value="Inbound Tunnel Pubkey" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-31">
          <mxGeometry y="60" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-39" value="Inbound Instructions" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-31">
          <mxGeometry y="90" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-38" value="Receiver Pub key" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-31">
          <mxGeometry y="120" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-40" value="ReportStats" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="380" y="205" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-41" value="Inbound Node ADNL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-40">
          <mxGeometry y="30" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-42" value="Inbound Tunnel Pubkey" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-40">
          <mxGeometry y="60" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-43" value="Inbound Instructions" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-40">
          <mxGeometry y="90" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-44" value="Receiver Pub key" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-40">
          <mxGeometry y="120" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-45" value="SendOut" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="120" y="455" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-46" value="IP" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-45">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-47" value="Port" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-45">
          <mxGeometry y="60" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-48" value="Deliver" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="380" y="455" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-50" value="(Empty)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-48">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-59" value="When instruction received, node decrypts payload and processed it" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="230" y="565" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-60" value="When instruction received, sends response to inbound tunnel as payload" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="230" y="375" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-78" value="GetRandomPeers" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="670" y="205" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-79" value="Inbound Node ADNL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-78">
          <mxGeometry y="30" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-80" value="Inbound Tunnel Pubkey" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-78">
          <mxGeometry y="60" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-81" value="Inbound Instructions" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-78">
          <mxGeometry y="90" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-82" value="Receiver Pub key" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-78">
          <mxGeometry y="120" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-86" value="GetInfoAndCapabilities" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry x="670" y="375" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-87" value="Inbound Node ADNL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-86">
          <mxGeometry y="30" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-88" value="Inbound Tunnel Pubkey" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-86">
          <mxGeometry y="60" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-89" value="Inbound Instructions" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-86">
          <mxGeometry y="90" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-90" value="Receiver Pub key" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-86">
          <mxGeometry y="120" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="bf9UCNY4LWysmnVGI4Mv-15" target="bf9UCNY4LWysmnVGI4Mv-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-51" value="Possible Payloads" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1820" y="-1740" width="780" height="510" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-52" value="Deliver" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry x="30" y="55" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-53" value="Seqno" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-52">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-54" value="Payload bytes" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-52">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-61" value="OutPortAllocated" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry x="280" y="55" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-62" value="Seqno" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-61">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-65" value="IP" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-61">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-63" value="Port" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-61">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-68" value="Stats" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry x="40" y="200" width="140" height="180" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-69" value="Seqno" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-68">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-70" value="Packets Sent" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-68">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-72" value="Packets Received" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-68">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-73" value="Balance left" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-68">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-71" value="..." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-68">
          <mxGeometry y="150" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-83" value="RandomPeers" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry x="280" y="200" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-84" value="Seqno" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-83">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-85" value="Peers" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-83">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-94" value="InfoAndCapabilities" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry x="530" y="55" width="160" height="180" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-95" value="Seqno" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-94">
          <mxGeometry y="30" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-96" value="Price per KB" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-94">
          <mxGeometry y="60" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-97" value="Capabilities" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-94">
          <mxGeometry y="90" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-98" value="Credit Balance" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-94">
          <mxGeometry y="120" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-99" value="..." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-94">
          <mxGeometry y="150" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="bf9UCNY4LWysmnVGI4Mv-4" target="bf9UCNY4LWysmnVGI4Mv-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-74" value="&lt;div&gt;Packet has garlic structure, where instructions are encrypted onion-like (multi-layer encryption), but payload encrypted once from sender to receiver, for efficiency. &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1845" y="-2190" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-75" value="Single packet can contain multiple instructions for multiple nodes on the way, and it can also contain multiple payloads, but should fit MTU" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="1">
          <mxGeometry x="1770" y="-2140" width="750" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-76" value="For sending and receiving messages different tunnels can be used" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="2250" y="-2080" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-77" value="&lt;div&gt;Initiator building both outbound and inbound tunnels.&lt;/div&gt;&lt;div&gt;Inbound tunnel is built by sending preencrypted instructions pack to &quot;out&quot; node.&amp;nbsp;&lt;/div&gt;&lt;div&gt;This node will attach those instructions and send to first node of inbound tunnel, along with encrypted payload. &lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="2120" y="-2040" width="610" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-100" value="&lt;font style=&quot;font-size: 45px;&quot;&gt;Protocol structure&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="2495" y="-2290" width="380" height="70" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-101" value="&lt;div&gt;After processing instructions and payloads they removed from packet,&amp;nbsp;&lt;/div&gt;&lt;div&gt;but to not reduce the size, node appends packet with random bytes&lt;/div&gt;&amp;nbsp;before routing" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;" vertex="1" parent="1">
          <mxGeometry x="1770" y="-1860" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-122" value="3. Register address in DHT and interact with ADNL peers" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3300" y="-960" width="450" height="810" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="bf9UCNY4LWysmnVGI4Mv-122" source="rZwPBGJ-U6KTbO7sFise-197" target="rZwPBGJ-U6KTbO7sFise-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-197" value="Node 0&lt;br&gt;(Source)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="bf9UCNY4LWysmnVGI4Mv-122" vertex="1">
          <mxGeometry x="160" y="670.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-199" value="Node 1" style="rounded=0;whiteSpace=wrap;html=1;" parent="bf9UCNY4LWysmnVGI4Mv-122" vertex="1">
          <mxGeometry x="160" y="550.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-203" value="Node 2" style="rounded=0;whiteSpace=wrap;html=1;" parent="bf9UCNY4LWysmnVGI4Mv-122" vertex="1">
          <mxGeometry x="160" y="420.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-198" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="bf9UCNY4LWysmnVGI4Mv-122" source="rZwPBGJ-U6KTbO7sFise-199" target="rZwPBGJ-U6KTbO7sFise-203" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-205" value="Node 3&lt;br&gt;Out" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="bf9UCNY4LWysmnVGI4Mv-122" vertex="1">
          <mxGeometry x="160" y="280.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rZwPBGJ-U6KTbO7sFise-202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="bf9UCNY4LWysmnVGI4Mv-122" source="rZwPBGJ-U6KTbO7sFise-203" target="rZwPBGJ-U6KTbO7sFise-205" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-114" value="DHT" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;align=center;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="160" y="129" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-116" value="Just a UDP packet&lt;div&gt;(Node 3 doesent knows what is it)&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="220" y="220.5" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-117" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="270.00002252329796" y="638.9966729266769" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-118" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;Route {id}&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="270.00002252329796" y="508.99667292667687" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-119" value="Decrypt garlics:&lt;br&gt;&lt;div&gt;SendOut&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Decrypt payload:&lt;/div&gt;&lt;div&gt;Deliver&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="270.00002252329796" y="380.49667292667687" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-120" value="&lt;div&gt;SetValue&lt;/div&gt;&lt;div&gt;Node 0 ADNL = Node 3 address&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="120" y="89" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.55;entryY=0.95;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="bf9UCNY4LWysmnVGI4Mv-122" source="rZwPBGJ-U6KTbO7sFise-205" target="bf9UCNY4LWysmnVGI4Mv-114">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-123" value="Similar interaction with any ADNL peer" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="110" y="40" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bf9UCNY4LWysmnVGI4Mv-124" value="&lt;div&gt;Node 0 can rent &quot;white&quot; address and serve any clients,&amp;nbsp;&lt;/div&gt;&lt;div&gt;even if its own IP is grey&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="bf9UCNY4LWysmnVGI4Mv-122">
          <mxGeometry x="65" y="745" width="320" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
